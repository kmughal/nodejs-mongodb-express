<%- include("../includes/head.ejs") %>
<%- include('../includes/nav.ejs') %>
<main>
  <h1>Edit <%= product.title %></h1>
  <% errorMessages.forEach(e => {%> 
    <p class="alert alert--danger"><%=e%></p>   
  <%})%>
  <form action='/admin/edit-product' method='POST' enctype="multipart/form-data">
    <input type="hidden" name="id" id="id" value="<%=product.id%>">
    <div class="form-control">
      <label for="title">Product name:</label>
      <input 
      class="<%= validationErrors.find(e => e.param ==='title') ? 'invalid' : ''%>"
      type='text' 
      name='title' 
      id='title' 
      value="<%= product.title%>" />
    </div>
    <div class="form-control">
      <label for="description">Description:</label>
      <input 
      class="<%= validationErrors.find(e => e.param ==='description') ? 'invalid' : ''%>"
      type='text' 
      name='description' 
      id='description' 
      value="<%=product.description%>"/>
    </div>
    <div class="form-control">
      <label for="price">Price:</label>
      <input 
      class="<%= validationErrors.find(e => e.param ==='price') ? 'invalid' : ''%>"
      type='number' 
      name='price' 
      id='price' 
      step="0.01" 
      value="<%=product.price%>"/>
    </div>
    <div class="form-control">
      <label for="imageUrl">Image</label>
      <input 
      type='image' 
      name='imageUrl' 
      id='imageUrl' />
    </div>
    <div class="form-control">
      <button>Save</button>
    </div>
    <input type="hidden" name="_csrf"  value="<%=csrfToken%>"/>
  </form>
</main>
<%- include('../includes/end.ejs') %>